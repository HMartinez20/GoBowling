---
title: Home
---
<!DOCTYPE html>
<html>
   <head>
      {% include header.html %}
      {% include fire.html %}
   </head>
   <body>
   <h1> {{ page.title }} </h1>
   <button id="button" class="btn" onclick="window.location='https://hmartinez20.github.io/GoBowling/pageTwo.html'"> Page 2 </button>
   <button onclick="writeNewItem();">Create New Item</button>
   <pre id="object"></pre>
   <button class="btn btn-primary" data-toggle="modal" data-target="#signUpModal">Sign Up</button>
   
   <div id="fileSubmit">
     /*<input type="file" value="upload" id="file-select"/>*/
     <input name="uploadFiles[]" id="uploadFiles" type="file" multiple="" />
      <button id="file-upload" class="btn btn-info" onclick="">Upload</button>
   </div>
   
   </body>
   <div class="modal" tabindex="-1" role="dialog" id="signUpModal">
      <div class="modal-dialog" role="document">
       <div class="modal-content">
         <div class="modal-header">
           <h5 class="modal-title">Sign Up</h5>
           <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
         </div>
         <div class="modal-body">
            <input type="text" id="user">Email</input>
            <input type="text" id="pass">New Password</input>
         </div>
         <div class="modal-footer">
           <button type="button" class="btn btn-primary" 
                   onclick="newSignUp('hmartinez21@mail.stmarytx.edu', 'testPass');">Save changes</button>
           <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         </div>
       </div>
      </div>
   </div>
   <script type="text/javascript">
      var test;
      console.log(test);
      console.log(document.getElementById("user").value);
      function newSignUp(user, pass){
         console.log("in new sign up function...");
         console.log(user," ",pass);
         firebase.auth().createUserWithEmailAndPassword(user, pass).catch(function(error) {
            console.log(error.code);
            console.log(error.message);
         });
      }
      
      const storage = firebase.storage(); // Reference to storage service
      var db = firebase.firestore();
      
      var fileButton = document.getElementById("file-upload");
      //var fileSelect = document.getElementById("file-select");
      function handleFileSelect(id){
         var metaData = {
            customMetadata:{
               'seller': id
            }
         };
         // Get files
         var files = document.getElementById("uploadFiles");
         var tasks = [];
         
         // Create storage ref
         const storageRef = storage.ref('posts/');  // Reference to WHERE the image will be stored
         
         // Add each file to storage
         for(var i = 0; i < files.files.length; i++){
            tasks[i] = storageRef.put(files.files[i], metaData);
            //fileList.push(files.files[i], metaData);
            
            //Upload progress
            task[i].on('state_changed',
               function progress(snapshot){
               },
               function error(err){
                  alert(err);
               },
               function complete(){
                  alert("Uploaded!");
               }
            );
         }
      }
     
      function writeNewItem(){
         db.collection("items").add({
             price: "$5.00",
             username: "test123"
         })
         .then(function(docRef) {
             console.log("Document successfully written with ID...", docRef.id);
            handleFileSelect(docRef.id);
           
         })
         .catch(function(error) {
             console.error("Error writing document: ", error);
         });

         /*
         var usersRef = firebase.database().ref("users/");
         usersRef.push({
            name: "Jane",
            number: 1,
            age: 30
         }).then(function(snapshot){
           var key = snapshot.key;
           console.log(key);
           });
           */
      }
   </script>
</html>
